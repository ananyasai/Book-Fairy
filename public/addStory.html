<!doctype html>
<html lang="en">
<head>
  <title>Add Story</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script type="text/javascript">
    function getURLParameter(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
        );
    }

    jQuery(document).ready(function(){
        var code = getURLParameter('ref');
        $( "#param" ).val(code);
    });
  </script>
  <!--<script src="https://code.jquery.com/jquery-1.10.2.js"></script>-->
</head>
  <body>
    <div data-role="page">
      <div data-role="header">
        <table style="width:100%">
          <tr>
            <td>
                <a href="http://book-fairy.org"  target="_blank">
                <img border="0" src="icon/logo-small.png" alt="Logo, Di-Com" style="float:left;display:inline"/></a>
            </td>
            <td>
                <h2 align="right">Book Fairy</h2>
                <p align="right">v 0.1
                <p>
            </td>
          </tr>
        </table>
      </div> 
      <div data-role="main" class="ui-content">
        <form method="post" action="https://us-central1-book-fairy.cloudfunctions.net/addStory" id="storyform">
          <div>               
                <label for="Title">Story Title:</label>
                <input type="text" name="storyName" id="storyName">
                <label for="Category">Category:</label>
                <select name="category" id="category" form="storyform">
                  <option value="Fairy Tales">Fairy Tales</option>
                  <option value="Fables">Fables</option>
                </select>
                <label for="Description">Provide the Story Description:</label>
                <textarea name="Description" id="Description"></textarea>
                <input type="hidden" name="param" id="param" value="">   
                <input type="hidden" name="encodedDescription" id="encodedDescription" value="">
                <input type="submit" data-inline="true" value="Submit">    
          </div>
        </form>
      </div>
    </div>
    <script>
      $( "form" ).submit(function( event ) {
          console.log($( "#story" ).val());
          console.log($( "#Description" ).val());
          console.log($( "input:first" ).val());
          $( "#encodedDescription" ).val(btoa($( "#Description" ).val()));
          console.log($( "#encodedDescription" ).val());
          return;
      });
    </script>
  </body>
</html>